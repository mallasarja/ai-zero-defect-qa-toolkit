# PR-IMPACT — IO-141368 (integrator-ui#12528)

Changed areas
- Removed: `src/components/DynaForm/fields/DynaBatchSizeText.jsx` and its tests
- Modified: `fields/index.js` to drop `batchSizeText`; `forms/.../http.js` to add `http.response.hasHeader` field and make `http.response.resourcePath` not required when batchSize>1; `helpTextMap.js` adds help for `import.http.response.hasHeader`; `utils/resource.ts` JSON mediaType utility

## Tests

- **Test Case ID:** PR-IO-141368-UI-001
- **Title/Description:** Field `http.response.resourcePath` not required when `http.batchSize > 1`
- **Preconditions:** Create flow → Configure import (HTTP) → Set mappings
- **Test Steps:**
  - Set `http.batchSize=2`; leave `http.response.resourcePath` empty
  - Run flow → Check dashboard/logs → Inspect HTTP payload
- **Test Data:** JSON array; batchSize=2
- **Expected Result:** No validation error; dashboard success; metric `io.import.validation.error.count`=0
- **Tags/Labels:** PR-IMPACT, UI, Regression
- **Test Type:** Regression
- **Diff Ref:** forms fieldDefinitions http.js (required removed)

- **Test Case ID:** PR-IO-141368-UI-002
- **Title/Description:** Show and persist `http.batchSize` when mediaType=plain/text
- **Preconditions:** Import config open
- **Test Steps:**
  - Set Override request media type=plain/text; set batchSize=3; Save → Close → Reopen
- **Test Data:** mediaType=plain/text; batchSize=3
- **Expected Result:** Field visible; value persists; log `import.http.request.mediaType=plain/text`
- **Tags/Labels:** PR-IMPACT, UI
- **Test Type:** Functional
- **Diff Ref:** removal of DynaBatchSizeText + fieldDefinitions change

- **Test Case ID:** PR-IO-141368-UI-003
- **Title/Description:** `http.response.hasHeader` checkbox visibility when `batchSize>1`
- **Preconditions:** Create flow → Configure import
- **Test Steps:**
  - Set batchSize=0→1→2; observe `hasHeader` visibility; hover help
- **Test Data:** batchSize transitions
- **Expected Result:** Visible only when >1; help shows `import.http.response.hasHeader`
- **Tags/Labels:** PR-IMPACT, UI
- **Test Type:** Functional
- **Diff Ref:** added field + helpTextMap

- **Test Case ID:** PR-IO-141368-UI-004
- **Title/Description:** API parity for `hasHeader` and batchSize rules
- **Preconditions:** API token
- **Test Steps:**
  - GET/PUT import config; assert `http.response.hasHeader` persists only when batchSize>1
- **Test Data:** batchSize=1,2
- **Expected Result:** API enforces visibility/omit rules
- **Tags/Labels:** PR-IMPACT, API, UI
- **Test Type:** API
- **Diff Ref:** forms definitions, utils.resource isFinalMediaTypeJSON
